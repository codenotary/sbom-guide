<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Authenticating Known and Trusted Dependencies # If we attempt to authenticate a Docker image which has not yet been notarized with our signing key, we receive a warning that the asset hasn&rsquo;t yet been notarized:
❯ vcn authenticate --bom docker://python:3.9-alpine Warning: c9b90024bc4d49b1fa0ea4673b6eb1db1058cd1cba4b840d336bedf803a0afcf was not notarized When we then notarize the image, all of its dependencies are resolved, authenticated with Trustcenter, signed, and marked as Trusted:
❯ vcn notarize --bom image://python:3."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Authenticating Dependencies"><meta property="og:description" content="Authenticating Known and Trusted Dependencies # If we attempt to authenticate a Docker image which has not yet been notarized with our signing key, we receive a warning that the asset hasn&rsquo;t yet been notarized:
❯ vcn authenticate --bom docker://python:3.9-alpine Warning: c9b90024bc4d49b1fa0ea4673b6eb1db1058cd1cba4b840d336bedf803a0afcf was not notarized When we then notarize the image, all of its dependencies are resolved, authenticated with Trustcenter, signed, and marked as Trusted:
❯ vcn notarize --bom image://python:3."><meta property="og:type" content="article"><meta property="og:url" content="https://thesbom.com/vcn-usage/dependency-authentication/"><meta property="article:section" content="vcn-usage"><meta property="article:modified_time" content="2022-10-06T21:04:55-04:00"><title>Authenticating Dependencies | Developer's Guide to SBOMs</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon-32x32.png sizes=32x32><link rel=icon href=/favicon-192x192.png sizes=192x192><link rel=apple-touch-icon href=/favicon-180x180.png><meta name=msapplication-TileImage content="/favicon-270x270.png"><link rel=stylesheet href=/book.min.5c39c778469f85c712c861b33d131d36e97a6abeddc8cec6044d3f66cc6f6536.css integrity="sha256-XDnHeEafhccSyGGzPRMdNul6ar7dyM7GBE0/ZsxvZTY=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.00d2ad8aead9ecbf98fc3601971b89d6cea2d7db622420fb4877db42e388e71b.js integrity="sha256-ANKtiurZ7L+Y/DYBlxuJ1s6i19tiJCD7SHfbQuOI5xs=" crossorigin=anonymous></script>
<script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class=align-center href=/><img src=/codenotary.svg alt=Logo id=site-logo><span id=site-title>Developer's Guide to SBOMs</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/>Main Page</a><ul></ul></li><li class=book-section-flat><span>Understanding SBOMs</span><ul><li><a href=/sboms/sbom-intro/>Introduction</a></li><li><a href=/sboms/sbom-concepts/>SBOM Concepts</a></li><li><a href=/sboms/spdx-documents/>SPDX Documents</a></li><li><a href=/sboms/supply-chain/>Software Security</a></li><li><a href=/sboms/cyclonedx-documents/>CycloneDX Documents</a></li></ul></li><li class=book-section-flat><span>Using vcn with Trustcenter</span><ul><li><a href=/vcn-usage/intro/>Introduction to VCN</a></li><li><a href=/vcn-usage/notarizing-assets/>Notarizing Assets</a></li><li><a href=/vcn-usage/authenticating-assets/>Authenticating Assets</a></li><li><a href=/vcn-usage/labeling-assets/>Labeling Assets</a></li><li><a href=/vcn-usage/bom-authentication/>Authenticating SBOMs</a></li><li><a href=/vcn-usage/dependency-authentication/ class=active>Authenticating Dependencies</a></li><li><a href=/vcn-usage/managing-dependencies/>Working with Dependencies</a></li><li><a href=/vcn-usage/bom-interoperability/>Working with Other Tools</a></li></ul></li><li class=book-section-flat><span>Reference</span><ul><li><a href=/reference/glossary/>Glossary</a><ul></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Authenticating Dependencies</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#authenticating-known-and-trusted-dependencies>Authenticating Known and Trusted Dependencies</a></li></ul></nav></aside></header><article class=markdown><h1 id=authenticating-known-and-trusted-dependencies>Authenticating Known and Trusted Dependencies
<a class=anchor href=#authenticating-known-and-trusted-dependencies>#</a></h1><p>If we attempt to authenticate a Docker image which has not yet been notarized with our signing key, we receive a warning that the asset hasn&rsquo;t yet been notarized:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>❯ vcn authenticate --bom docker://python:3.9-alpine
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Warning: c9b90024bc4d49b1fa0ea4673b6eb1db1058cd1cba4b840d336bedf803a0afcf was not notarized
</span></span></code></pre></div><p>When we then notarize the image, all of its dependencies are resolved, authenticated with Trustcenter, signed, and marked as <code>Trusted</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>❯ vcn notarize --bom image://python:3.9-alpine
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Your assets will not be uploaded. They will be processed locally.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Notarization in progress...
</span></span><span style=display:flex><span>artifact notarized
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Kind:        image
</span></span><span style=display:flex><span>Name:        python:3.9-alpine
</span></span><span style=display:flex><span>Hash:        dca341b7a3fdbe1aa117f97f55321e60fe54a177d6f58ab3373ece796aca52ef
</span></span><span style=display:flex><span>Metadata:    hashtype<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;SHA256&#34;</span>
</span></span><span style=display:flex><span>        image<span style=color:#f92672>={</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;Architecture&#34;</span>: <span style=color:#e6db74>&#34;amd64&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;Created&#34;</span>: <span style=color:#e6db74>&#34;2022-09-07 23:29:27.440739972 +0000 UTC&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;DockerVersion&#34;</span>: <span style=color:#e6db74>&#34;20.10.12&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;Id&#34;</span>: <span style=color:#e6db74>&#34;0721d3b351f08b8a337ace23d9e1f99cc9cab25b3459b95359b85054c631a1af&#34;</span>,
</span></span><span style=display:flex><span>            . . .
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        platform<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;linux&#34;</span>
</span></span><span style=display:flex><span>        architecture<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;amd64&#34;</span>
</span></span><span style=display:flex><span>SignerID:    demo-signer
</span></span><span style=display:flex><span>Apikey revoked:    no
</span></span><span style=display:flex><span>Status:        TRUSTED
</span></span><span style=display:flex><span>Dependencies:
</span></span><span style=display:flex><span>        busybox@1.35.0-r17                     899f82d8925d0659b628ab403a44a433bcd97a06 TRUSTED
</span></span><span style=display:flex><span>        musl@1.2.3-r0                          682bb42e6503a00152397e3db87be4602d566ac4 TRUSTED
</span></span><span style=display:flex><span>        alpine-keys@2.4-r1                     1417c88edb049afbaaa0d5e94a15c3726fe68f31 TRUSTED
</span></span><span style=display:flex><span>        alpine-baselayout@3.2.0-r22            97afe73342be73255da8d7e0929d7f73a625ce4d TRUSTED
</span></span><span style=display:flex><span>        . . .
</span></span><span style=display:flex><span>        keyutils-libs@1.6.3-r1                 19eb523e1d62d8b90431763aa3073d30e3283fb2 TRUSTED
</span></span><span style=display:flex><span>        libuuid@2.38-r1                        68bd5e9b8fe99566387e2ad7b7a44c8cf0936673 TRUSTED
</span></span><span style=display:flex><span>        readline@8.1.2-r0                      f676007339535e21de79acffbe7ae743a1f7168c TRUSTED
</span></span><span style=display:flex><span>        .python-rundeps@20220907.232918        2d6f839e7b5f86c10811f4574f044b3b3ad53417 TRUSTED
</span></span></code></pre></div><p>If we then attempt to authenticate the image we just notarized, we can confirm that it is now marked as <code>Trusted</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vcn authenticate --bom image://python:3.9-alpine
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Kind:        image
</span></span><span style=display:flex><span>Name:        python:3.9-alpine
</span></span><span style=display:flex><span>Hash:        dca341b7a3fdbe1aa117f97f55321e60fe54a177d6f58ab3373ece796aca52ef
</span></span><span style=display:flex><span>Metadata:    architecture<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;amd64&#34;</span>
</span></span><span style=display:flex><span>        hashtype<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;SHA256&#34;</span>
</span></span><span style=display:flex><span>        image<span style=color:#f92672>={</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;Architecture&#34;</span>: <span style=color:#e6db74>&#34;amd64&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;Created&#34;</span>: <span style=color:#e6db74>&#34;2022-09-07 23:29:27.440739972 +0000 UTC&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;DockerVersion&#34;</span>: <span style=color:#e6db74>&#34;20.10.12&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;Id&#34;</span>: <span style=color:#e6db74>&#34;0721d3b351f08b8a337ace23d9e1f99cc9cab25b3459b95359b85054c631a1af&#34;</span>,
</span></span><span style=display:flex><span>            . . .
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        platform<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;linux&#34;</span>
</span></span><span style=display:flex><span>SignerID:    demo-signer
</span></span><span style=display:flex><span>Apikey revoked:    no
</span></span><span style=display:flex><span>Status:        TRUSTED
</span></span><span style=display:flex><span>Dependencies:
</span></span><span style=display:flex><span>        alpine-baselayout-data@3.2.0-r22       bf84212e37b7916942f03263f997c94e39494525 TRUSTED
</span></span><span style=display:flex><span>        musl@1.2.3-r0                          682bb42e6503a00152397e3db87be4602d566ac4 TRUSTED
</span></span><span style=display:flex><span>        busybox@1.35.0-r17                     899f82d8925d0659b628ab403a44a433bcd97a06 TRUSTED
</span></span><span style=display:flex><span>        alpine-baselayout@3.2.0-r22            97afe73342be73255da8d7e0929d7f73a625ce4d TRUSTED
</span></span><span style=display:flex><span>        . . .
</span></span><span style=display:flex><span>        keyutils-libs@1.6.3-r1                 19eb523e1d62d8b90431763aa3073d30e3283fb2 TRUSTED
</span></span><span style=display:flex><span>        libuuid@2.38-r1                        68bd5e9b8fe99566387e2ad7b7a44c8cf0936673 TRUSTED
</span></span><span style=display:flex><span>        readline@8.1.2-r0                      f676007339535e21de79acffbe7ae743a1f7168c TRUSTED
</span></span><span style=display:flex><span>        .python-rundeps@20220907.232918        2d6f839e7b5f86c10811f4574f044b3b3ad53417 TRUSTED
</span></span></code></pre></div><p>Let&rsquo;s say there is a hypothetical vulnerability discovered in the package <code>keyutils-libs@1.6.3-r1</code>, and we want to ensure we don&rsquo;t run any containers based on images containing this dependency.</p><p>We can take the untrusted dependency&rsquo;s hash and mark it as untrusted:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>❯ vcn untrust --hash 19eb523e1d62d8b90431763aa3073d30e3283fb2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Your assets will not be uploaded. They will be processed locally.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Notarization in progress...
</span></span><span style=display:flex><span>artifact notarized
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Name:        keyutils-libs
</span></span><span style=display:flex><span>Hash:        19eb523e1d62d8b90431763aa3073d30e3283fb2
</span></span><span style=display:flex><span>Metadata:    hashtype<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;SHA1&#34;</span>
</span></span><span style=display:flex><span>        license<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;GPL-2.0-or-later LGPL-2.0-or-later&#34;</span>
</span></span><span style=display:flex><span>        version<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;1.6.3-r1&#34;</span>
</span></span><span style=display:flex><span>SignerID:    demo-signer
</span></span><span style=display:flex><span>Apikey revoked:    no
</span></span><span style=display:flex><span>Status:        UNTRUSTED
</span></span></code></pre></div><p>Now, when we attempt to notarize any assets that contain our known-vulnerable dependency, we will see that the notarization fails:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>❯ vcn notarize --bom image://python:3.10-alpine
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Dependency keyutils-libs@1.6.3-r1 trust level is UNTRUSTED
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Error: some dependencies have insufficient trust level so artifact cannot be notarized. You can override it with --bom-force option
</span></span></code></pre></div><p>Because the <code>keyutils-libs@1.6.3-r1</code> dependency has already been marked as untrusted with our current signing key, any future attempts to notarize an asset containing that dependency will fail.</p></article><div class="docs-nav-box docs-nav-prev"><span class=docs-nav-text>Last topic:</span>
<a href=/vcn-usage/bom-authentication/ class=docs-nav-link>← Authenticating SBOMs</a></div><div class="docs-nav-box docs-nav-next"><span class=docs-nav-text>Next topic:</span>
<a href=/vcn-usage/managing-dependencies/ class=docs-nav-link>Working with Dependencies →</a></div><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#authenticating-known-and-trusted-dependencies>Authenticating Known and Trusted Dependencies</a></li></ul></nav></div></aside></main></body></html>